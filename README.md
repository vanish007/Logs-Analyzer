# Logs-Analyzer

## О проекте

В рамках лабораторной работы я разработал [утилиту](https://ru.wikipedia.org/wiki/%D0%A3%D1%82%D0%B8%D0%BB%D0%B8%D1%82%D0%B0) для анализа файлов журнала доступа ([access.log](https://ru.wikipedia.org/wiki/Access.log)).

Утилита позволяет:

1. Выводить запросы, завершившиеся ошибкой (с кодом `5XX`).
2. Определять промежуток времени, в который количество запросов к серверу было максимальным.

## Функциональность 

Моя утилита поддерживает следующие аргументы командной строки:

| Короткий аргумент | Длинный аргумент  | Значение по умолчанию   | Описание |
|-------------------|-------------------|-------------------------|----------|
| `-o path`         | `--output=path`   |                         | Путь к файлу для записи запросов с ошибками. Если файл не указан, анализ запросов с ошибками не выполняется. |
| `-p`              | `--print`         |                         | Продублировать вывод запросов с ошибками в `stdout` (терминал). |
| `-s n`            | `--stats=n`       | `10`                    | Вывести `n` самых частых запросов с кодом `5XX` в порядке их частоты. |
| `-w t`            | `--window=t`      | `0`                     | Найти и вывести промежуток времени длиной t секунд с максимальным количеством запросов. Если t = 0, расчет не производится. |
| `-f`              | `--from=time`     | Наименьшее время в логе | Ограничение анализа начальным временем (формат [timestamp](https://www.unixtimestamp.com)). |
| `-e`              | `--to=time`       | Наибольшее время в логе | Ограничение анализа конечным временем (формат [timestamp](https://www.unixtimestamp.com)). |

Формат запуска программы:

AnalyzeLog [OPTIONS] logs_filename

### Формат файла логов

Для тестирования я использовал [логи сервера NASA](https://drive.google.com/file/d/1jjzMocc0Rn9TqkK_51Oo93Fy78KYnm2i/view).

Каждая строка лога имеет следующий формат:

`<remote_addr> - - [<local_time>] "<request>" <status> <bytes_send>`

| Значение     | Описание                                |
|--------------|-----------------------------------------|
| `remote_addr`| Адрес, с которого был отправлен запрос. |
| `local_time` | Время, в которое был получен запрос.    |
| `request`    | URL запроса.                            |
| `status`     | [Код ответа сервера](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status). |
| `bytes_send` | Количество переданных в ответе байт.    |

Пример строк из файла логов:

```
198.112.92.15 - - [03/Jul/2024:10:50:02 -0400] "GET /shuttle/countdown/HTTP/1.0" 200 3985
198.112.92.15 - - [03/Jul/2024:10:50:04 -0400] "GET /shuttle/nosuchpath/HTTP/1.0" 404 144
```

### Примеры запуска программы:

```
AnalyzeLog access.log --output=result.txt
```

```
AnalyzeLog access.log --output=result.txt --print --stats 5
```

```
AnalyzeLog --stats=2 --window=60 --from=805821284 --to=807117284 access.log
```

```
AnalyzeLog -s 2 access.log
```

```
AnalyzeLog -w 10 access.log
```

```
AnalyzeLog access.log -w 10
```
